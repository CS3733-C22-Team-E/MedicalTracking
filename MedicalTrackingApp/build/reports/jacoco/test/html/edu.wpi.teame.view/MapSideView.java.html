<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>MapSideView.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">MedicalTrackingApp</a> &gt; <a href="index.source.html" class="el_package">edu.wpi.teame.view</a> &gt; <span class="el_source">MapSideView.java</span></div><h1>MapSideView.java</h1><pre class="source lang-java linenums">package edu.wpi.teame.view;

import edu.wpi.teame.App;
import edu.wpi.teame.db.DBManager;
import edu.wpi.teame.model.Equipment;
import edu.wpi.teame.model.enums.FloorType;
import java.sql.SQLException;
import java.util.ArrayList;
import java.util.List;
import javafx.event.EventHandler;
import javafx.geometry.Point2D;
import javafx.geometry.Pos;
import javafx.scene.Parent;
import javafx.scene.control.ListView;
import javafx.scene.control.ScrollPane;
import javafx.scene.image.Image;
import javafx.scene.image.ImageView;
import javafx.scene.input.MouseEvent;
import javafx.scene.layout.*;
import javafx.scene.paint.Color;
import javafx.scene.shape.Rectangle;
import javax.swing.*;

public class MapSideView {
<span class="nc" id="L25">  private final StackPane layout = new StackPane();</span>
  private Image backgroundImage;
<span class="nc" id="L27">  private double MAPHEIGHT = 1343;</span>
<span class="nc" id="L28">  private double MAPWIDTH = 859;</span>
<span class="nc" id="L29">  private int[][] EquipmentManagementArray = new int[2][4];</span>
<span class="nc" id="L30">  ListView&lt;Equipment&gt; newListview = new ListView&lt;Equipment&gt;();</span>

<span class="nc" id="L32">  public MapSideView() {</span>
<span class="nc bnc" id="L33" title="All 2 branches missed.">    for (int i = 0; i &lt; 4; ++i) {</span>
<span class="nc bnc" id="L34" title="All 2 branches missed.">      for (byte j = 0; i &lt; 2; ++i) {</span>
<span class="nc" id="L35">        this.EquipmentManagementArray[i][j] = 0;</span>
      }
    }
<span class="nc" id="L38">    backgroundImage =</span>
<span class="nc" id="L39">        new Image(App.class.getResource(&quot;images/map/Tower - Side View.jpg&quot;).toString());</span>
<span class="nc" id="L40">    newListview.setPrefSize(600, 200);</span>
<span class="nc" id="L41">    newListview.setMaxSize(newListview.getPrefWidth(), newListview.getPrefHeight());</span>
<span class="nc" id="L42">    newListview.getStyleClass().add(&quot;combo-box&quot;);</span>
<span class="nc" id="L43">  }</span>

  public Parent getMapScene() {
<span class="nc" id="L46">    layout.getChildren().add(new ImageView(backgroundImage));</span>
<span class="nc" id="L47">    ZoomableScrollPane scroll = createScrollPane(layout);</span>
<span class="nc" id="L48">    StackPane staticWrapper = new StackPane();</span>
<span class="nc" id="L49">    GridPane Grid = new GridPane();</span>
<span class="nc" id="L50">    Grid.setMouseTransparent(true);</span>
<span class="nc" id="L51">    Grid.getChildren().add(newListview);</span>
<span class="nc" id="L52">    Grid.setVgrow(newListview, Priority.ALWAYS);</span>
<span class="nc" id="L53">    Grid.setAlignment(Pos.TOP_CENTER);</span>
<span class="nc" id="L54">    staticWrapper.getChildren().add(scroll);</span>
<span class="nc" id="L55">    layout.setOnMouseClicked(</span>
        event -&gt; {
<span class="nc" id="L57">          System.out.println(</span>
<span class="nc" id="L58">              layout.sceneToLocal(new Point2D(event.getSceneX(), event.getSceneY())));</span>
<span class="nc" id="L59">        });</span>
<span class="nc" id="L60">    Rectangle Floor3 = this.createRectangle(125.0D, 1025.0D, 413.0D, 52.0D);</span>
<span class="nc" id="L61">    Rectangle Floor1 = this.createRectangle(125.0D, 1125.0D, 413.0D, 52.0D);</span>
<span class="nc" id="L62">    Rectangle LL1 = this.createRectangle(121.0D, 1175.0D, 415.0D, 52.0D);</span>

<span class="nc" id="L64">    LL1.setOnMouseEntered(</span>
<span class="nc" id="L65">        new EventHandler&lt;MouseEvent&gt;() {</span>
          public void handle(MouseEvent event) {
            try {
<span class="nc" id="L68">              newListview.getItems().clear();</span>
<span class="nc" id="L69">              MapSideView.this.getEquipmentByFloorFromDB(FloorType.LowerLevel1).stream()</span>
<span class="nc" id="L70">                  .forEach(</span>
                      (equipment) -&gt; {
<span class="nc" id="L72">                        System.out.println(&quot;Sorting&quot;);</span>
<span class="nc" id="L73">                        newListview.getItems().add(equipment);</span>
<span class="nc bnc" id="L74" title="All 2 branches missed.">                        if (equipment.isClean()) {</span>
<span class="nc" id="L75">                          MapSideView.this</span>
<span class="nc" id="L76">                              .EquipmentManagementArray[0][equipment.getType().ordinal()]++;</span>
                        } else {
<span class="nc" id="L78">                          MapSideView.this</span>
<span class="nc" id="L79">                              .EquipmentManagementArray[1][equipment.getType().ordinal()]++;</span>
                        }
<span class="nc" id="L81">                      });</span>
<span class="nc" id="L82">            } catch (SQLException var3) {</span>
<span class="nc" id="L83">              var3.printStackTrace();</span>
<span class="nc" id="L84">            }</span>
<span class="nc" id="L85">          }</span>
        });
<span class="nc" id="L87">    Floor1.setOnMouseEntered(</span>
<span class="nc" id="L88">        new EventHandler&lt;MouseEvent&gt;() {</span>
          public void handle(MouseEvent event) {
<span class="nc" id="L90">            newListview.getItems().clear();</span>
            try {
<span class="nc" id="L92">              MapSideView.this.getEquipmentByFloorFromDB(FloorType.FirstFloor).stream()</span>
<span class="nc" id="L93">                  .forEach(</span>
                      (equipment) -&gt; {
<span class="nc" id="L95">                        System.out.println(&quot;Sorting&quot;);</span>
<span class="nc" id="L96">                        newListview.getItems().add(equipment);</span>
<span class="nc bnc" id="L97" title="All 2 branches missed.">                        if (equipment.isClean()) {</span>
<span class="nc" id="L98">                          MapSideView.this</span>
<span class="nc" id="L99">                              .EquipmentManagementArray[0][equipment.getType().ordinal()]++;</span>
                        } else {
<span class="nc" id="L101">                          MapSideView.this</span>
<span class="nc" id="L102">                              .EquipmentManagementArray[1][equipment.getType().ordinal()]++;</span>
                        }
<span class="nc" id="L104">                      });</span>
<span class="nc" id="L105">            } catch (SQLException var3) {</span>
<span class="nc" id="L106">              var3.printStackTrace();</span>
<span class="nc" id="L107">            }</span>
<span class="nc" id="L108">          }</span>
        });
<span class="nc" id="L110">    Floor3.setOnMouseEntered(</span>
<span class="nc" id="L111">        new EventHandler&lt;MouseEvent&gt;() {</span>
          public void handle(MouseEvent event) {
<span class="nc" id="L113">            newListview.getItems().clear();</span>
            try {
<span class="nc" id="L115">              MapSideView.this.getEquipmentByFloorFromDB(FloorType.ThirdFloor).stream()</span>
<span class="nc" id="L116">                  .forEach(</span>
                      (equipment) -&gt; {
<span class="nc" id="L118">                        System.out.println(&quot;Sorting&quot;);</span>
<span class="nc" id="L119">                        newListview.getItems().add(equipment);</span>
<span class="nc bnc" id="L120" title="All 2 branches missed.">                        if (equipment.isClean()) {</span>
<span class="nc" id="L121">                          MapSideView.this</span>
<span class="nc" id="L122">                              .EquipmentManagementArray[0][equipment.getType().ordinal()]++;</span>
                        } else {
<span class="nc" id="L124">                          MapSideView.this</span>
<span class="nc" id="L125">                              .EquipmentManagementArray[1][equipment.getType().ordinal()]++;</span>
                        }
<span class="nc" id="L127">                      });</span>
<span class="nc" id="L128">            } catch (SQLException var3) {</span>
<span class="nc" id="L129">              var3.printStackTrace();</span>
<span class="nc" id="L130">            }</span>
<span class="nc" id="L131">          }</span>
        });

<span class="nc" id="L134">    layout.getChildren().addAll(Floor3, Floor1, LL1);</span>
<span class="nc" id="L135">    staticWrapper.getChildren().add(Grid);</span>
<span class="nc" id="L136">    Grid.setColumnSpan(newListview, 3);</span>
<span class="nc" id="L137">    return staticWrapper;</span>
  }

  private ZoomableScrollPane createScrollPane(Pane layout) {
<span class="nc" id="L141">    ZoomableScrollPane scroll = new ZoomableScrollPane(layout);</span>
<span class="nc" id="L142">    scroll.setHbarPolicy(ScrollPane.ScrollBarPolicy.NEVER);</span>
<span class="nc" id="L143">    scroll.setVbarPolicy(ScrollPane.ScrollBarPolicy.NEVER);</span>
<span class="nc" id="L144">    scroll.setPannable(true);</span>
    // scroll.setPrefSize(WIDTH, HEIGHT);
<span class="nc" id="L146">    return scroll;</span>
  }

  private Rectangle createRectangle(
      double PixelXLeftTop, double PixelYLeftTop, double width, double height) {
<span class="nc" id="L151">    Rectangle retval = new Rectangle();</span>
<span class="nc" id="L152">    retval.setWidth(width);</span>
<span class="nc" id="L153">    retval.setHeight(height);</span>
<span class="nc" id="L154">    retval.setTranslateX(PixelXLeftTop + retval.getWidth() / 2 - MAPWIDTH / 2);</span>
<span class="nc" id="L155">    retval.setTranslateY(PixelYLeftTop + retval.getHeight() / 2 - MAPHEIGHT / 2);</span>
<span class="nc" id="L156">    retval.setFill(Color.BLUE);</span>
<span class="nc" id="L157">    retval.setOpacity(.35);</span>
<span class="nc" id="L158">    return retval;</span>
  }

  private List&lt;Equipment&gt; getEquipmentByFloorFromDB(FloorType floor) throws SQLException {
<span class="nc" id="L162">    List&lt;Equipment&gt; equipmentList = new ArrayList();</span>
<span class="nc bnc" id="L163" title="All 2 branches missed.">    for (Equipment equipment : DBManager.getInstance().getEquipmentManager().getAll()) {</span>
<span class="nc bnc" id="L164" title="All 2 branches missed.">      if (equipment.getLocation().getFloor() == floor) {</span>
<span class="nc" id="L165">        equipmentList.add(equipment);</span>
      }
<span class="nc" id="L167">    }</span>
<span class="nc" id="L168">    return equipmentList;</span>
  }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.4.201905082037</span></div></body></html>