<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>MapSideView.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">MedicalTrackingApp</a> &gt; <a href="index.source.html" class="el_package">edu.wpi.teame.view.map</a> &gt; <span class="el_source">MapSideView.java</span></div><h1>MapSideView.java</h1><pre class="source lang-java linenums">package edu.wpi.teame.view.map;

import edu.wpi.teame.App;
import edu.wpi.teame.db.DBManager;
import edu.wpi.teame.db.objectManagers.EquipmentManager;
import edu.wpi.teame.model.Equipment;
import edu.wpi.teame.model.enums.DataBaseObjectType;
import edu.wpi.teame.model.enums.FloorType;
import edu.wpi.teame.view.controllers.LandingPageController;
import java.sql.SQLException;
import java.util.ArrayList;
import java.util.List;
import javafx.event.EventHandler;
import javafx.geometry.Pos;
import javafx.scene.Parent;
import javafx.scene.control.Label;
import javafx.scene.control.ListView;
import javafx.scene.control.ScrollPane;
import javafx.scene.control.TextField;
import javafx.scene.image.Image;
import javafx.scene.image.ImageView;
import javafx.scene.input.MouseEvent;
import javafx.scene.layout.*;
import javafx.scene.paint.Color;
import javafx.scene.shape.Rectangle;

public class MapSideView {
<span class="nc" id="L28">  private final StackPane layout = new StackPane();</span>
  private Image backgroundImage;
<span class="nc" id="L30">  private double MAPHEIGHT = 1343;</span>
<span class="nc" id="L31">  private double MAPWIDTH = 859;</span>
<span class="nc" id="L32">  private int[][] EquipmentManagementArray = new int[2][4];</span>
<span class="nc" id="L33">  ListView&lt;Equipment&gt; AllEquipmentView = new ListView&lt;Equipment&gt;();</span>
<span class="nc" id="L34">  GridPane holder = new GridPane();</span>
<span class="nc" id="L35">  public ArrayList&lt;TextField&gt; cleanFields = new ArrayList&lt;TextField&gt;();</span>
<span class="nc" id="L36">  public ArrayList&lt;TextField&gt; dirtyFields = new ArrayList&lt;TextField&gt;();</span>
  private LandingPageController Tabber;
  private Map MapView;

<span class="nc" id="L40">  public MapSideView(LandingPageController Tab, Map mapView) {</span>
<span class="nc" id="L41">    Tabber = Tab;</span>
<span class="nc" id="L42">    MapView = mapView;</span>
<span class="nc bnc" id="L43" title="All 2 branches missed.">    for (int i = 0; i &lt; 4; ++i) {</span>
<span class="nc bnc" id="L44" title="All 2 branches missed.">      for (byte j = 0; i &lt; 2; ++i) {</span>
<span class="nc" id="L45">        this.EquipmentManagementArray[i][j] = 0;</span>
      }
    }
<span class="nc bnc" id="L48" title="All 2 branches missed.">    for (int i = 0; i &lt; 4; i++) {</span>
<span class="nc" id="L49">      TextField clean = new TextField(&quot;0&quot;);</span>
<span class="nc" id="L50">      clean.setMaxWidth(35);</span>
<span class="nc" id="L51">      cleanFields.add(clean);</span>
<span class="nc" id="L52">      TextField dirty = new TextField(&quot;0&quot;);</span>
<span class="nc" id="L53">      dirty.setMaxWidth(35);</span>
<span class="nc" id="L54">      dirtyFields.add(dirty);</span>
<span class="nc" id="L55">      holder.add(cleanFields.get(i), i + 1, 1);</span>
<span class="nc" id="L56">      holder.add(dirtyFields.get(i), i + 1, 2);</span>
    }
<span class="nc" id="L58">    backgroundImage =</span>
<span class="nc" id="L59">        new Image(App.class.getResource(&quot;images/map/Tower - Side View.jpg&quot;).toString());</span>
<span class="nc" id="L60">    AllEquipmentView.setPrefSize(600, 200);</span>
<span class="nc" id="L61">    AllEquipmentView.setMaxSize(AllEquipmentView.getPrefWidth(), AllEquipmentView.getPrefHeight());</span>
<span class="nc" id="L62">    AllEquipmentView.getStyleClass().add(&quot;combo-box&quot;);</span>
<span class="nc" id="L63">    holder.setAlignment(Pos.CENTER);</span>
<span class="nc" id="L64">    Label Clean = new Label(&quot;Clean&quot;);</span>
<span class="nc" id="L65">    Label Dirty = new Label(&quot;Dirty&quot;);</span>
<span class="nc" id="L66">    holder.add(Clean, 0, 1);</span>
<span class="nc" id="L67">    holder.add(Dirty, 0, 2);</span>
<span class="nc" id="L68">    Label PBED = new Label(&quot;Patient Beds&quot;);</span>
<span class="nc" id="L69">    Label XRAY = new Label(&quot;XRAYs&quot;);</span>
<span class="nc" id="L70">    Label INFUSIONPUMP = new Label(&quot;Infusion Pumps&quot;);</span>
<span class="nc" id="L71">    Label RECLINER = new Label(&quot;Recliners&quot;);</span>
<span class="nc" id="L72">    holder.add(PBED, 1, 0);</span>
<span class="nc" id="L73">    holder.add(INFUSIONPUMP, 2, 0);</span>
<span class="nc" id="L74">    holder.add(XRAY, 3, 0);</span>
<span class="nc" id="L75">    holder.add(RECLINER, 4, 0);</span>
<span class="nc" id="L76">    holder.setMaxSize(600, 200);</span>
<span class="nc" id="L77">    holder.setHgap(10);</span>
<span class="nc" id="L78">    holder.setVgap(10);</span>
<span class="nc" id="L79">  }</span>

  public Parent getMapScene() {
<span class="nc" id="L82">    layout.getChildren().add(new ImageView(backgroundImage));</span>
<span class="nc" id="L83">    ZoomableScrollPane scroll = createScrollPane(layout);</span>
<span class="nc" id="L84">    StackPane staticWrapper = new StackPane();</span>
<span class="nc" id="L85">    GridPane Grid = new GridPane();</span>
<span class="nc" id="L86">    Grid.setMouseTransparent(true);</span>
<span class="nc" id="L87">    Grid.getChildren().add(AllEquipmentView);</span>
<span class="nc" id="L88">    Grid.setVgrow(AllEquipmentView, Priority.ALWAYS);</span>
<span class="nc" id="L89">    Grid.setAlignment(Pos.TOP_CENTER);</span>
<span class="nc" id="L90">    staticWrapper.getChildren().add(scroll);</span>
<span class="nc" id="L91">    Rectangle Floor3 = this.createRectangle(125.0D, 1025.0D, 413.0D, 52.0D);</span>
<span class="nc" id="L92">    Rectangle Floor1 = this.createRectangle(125.0D, 1125.0D, 413.0D, 52.0D);</span>
<span class="nc" id="L93">    Rectangle LL1 = this.createRectangle(121.0D, 1175.0D, 415.0D, 52.0D);</span>

<span class="nc" id="L95">    LL1.setOnMouseEntered(</span>
<span class="nc" id="L96">        new EventHandler&lt;MouseEvent&gt;() {</span>
          public void handle(MouseEvent event) {
<span class="nc bnc" id="L98" title="All 2 branches missed.">            for (int i = 0; i &lt; 4; i++) {</span>
<span class="nc" id="L99">              EquipmentManagementArray[0][i] = 0;</span>
<span class="nc" id="L100">              EquipmentManagementArray[1][i] = 0;</span>
            }
            try {
<span class="nc" id="L103">              AllEquipmentView.getItems().clear();</span>
<span class="nc" id="L104">              MapSideView.this.getEquipmentByFloorFromDB(FloorType.LowerLevel1).stream()</span>
<span class="nc" id="L105">                  .forEach(</span>
                      (equipment) -&gt; {
<span class="nc" id="L107">                        System.out.println(&quot;Sorting&quot;);</span>
<span class="nc" id="L108">                        AllEquipmentView.getItems().add(equipment);</span>
<span class="nc bnc" id="L109" title="All 2 branches missed.">                        if (equipment.isClean()) {</span>
<span class="nc" id="L110">                          MapSideView.this</span>
<span class="nc" id="L111">                              .EquipmentManagementArray[0][equipment.getType().ordinal()]++;</span>
                        } else {
<span class="nc" id="L113">                          MapSideView.this</span>
<span class="nc" id="L114">                              .EquipmentManagementArray[1][equipment.getType().ordinal()]++;</span>
                        }
<span class="nc" id="L116">                      });</span>
<span class="nc" id="L117">            } catch (SQLException var3) {</span>
<span class="nc" id="L118">              var3.printStackTrace();</span>
<span class="nc" id="L119">            }</span>
<span class="nc" id="L120">            updateFieldsinGrid();</span>
<span class="nc" id="L121">          }</span>
        });
<span class="nc" id="L123">    LL1.setOnMouseClicked(</span>
<span class="nc" id="L124">        new EventHandler&lt;MouseEvent&gt;() {</span>
          @Override
          public void handle(MouseEvent event) {
<span class="nc" id="L127">            Tabber.mainTabPane.getSelectionModel().select(2);</span>
            try {
<span class="nc" id="L129">              MapView.switchFloors(FloorType.LowerLevel1);</span>
<span class="nc" id="L130">            } catch (SQLException e) {</span>
<span class="nc" id="L131">              e.printStackTrace();</span>
<span class="nc" id="L132">            }</span>
<span class="nc" id="L133">          }</span>
        });
<span class="nc" id="L135">    Floor1.setOnMouseEntered(</span>
<span class="nc" id="L136">        new EventHandler&lt;MouseEvent&gt;() {</span>
          public void handle(MouseEvent event) {
<span class="nc bnc" id="L138" title="All 2 branches missed.">            for (int i = 0; i &lt; 4; i++) {</span>
<span class="nc" id="L139">              EquipmentManagementArray[0][i] = 0;</span>
<span class="nc" id="L140">              EquipmentManagementArray[1][i] = 0;</span>
            }
<span class="nc" id="L142">            AllEquipmentView.getItems().clear();</span>
            try {
<span class="nc" id="L144">              MapSideView.this.getEquipmentByFloorFromDB(FloorType.FirstFloor).stream()</span>
<span class="nc" id="L145">                  .forEach(</span>
                      (equipment) -&gt; {
<span class="nc" id="L147">                        System.out.println(&quot;Sorting&quot;);</span>
<span class="nc" id="L148">                        AllEquipmentView.getItems().add(equipment);</span>
<span class="nc bnc" id="L149" title="All 2 branches missed.">                        if (equipment.isClean()) {</span>
<span class="nc" id="L150">                          MapSideView.this</span>
<span class="nc" id="L151">                              .EquipmentManagementArray[0][equipment.getType().ordinal()]++;</span>
                        } else {
<span class="nc" id="L153">                          MapSideView.this</span>
<span class="nc" id="L154">                              .EquipmentManagementArray[1][equipment.getType().ordinal()]++;</span>
                        }
<span class="nc" id="L156">                      });</span>
<span class="nc" id="L157">            } catch (SQLException var3) {</span>
<span class="nc" id="L158">              var3.printStackTrace();</span>
<span class="nc" id="L159">            }</span>
<span class="nc" id="L160">            updateFieldsinGrid();</span>
<span class="nc" id="L161">          }</span>
        });
<span class="nc" id="L163">    Floor1.setOnMouseClicked(</span>
<span class="nc" id="L164">        new EventHandler&lt;MouseEvent&gt;() {</span>
          @Override
          public void handle(MouseEvent event) {
<span class="nc" id="L167">            Tabber.mainTabPane.getSelectionModel().select(2);</span>
            try {
<span class="nc" id="L169">              MapView.switchFloors(FloorType.FirstFloor);</span>
<span class="nc" id="L170">            } catch (SQLException e) {</span>
<span class="nc" id="L171">              e.printStackTrace();</span>
<span class="nc" id="L172">            }</span>
<span class="nc" id="L173">          }</span>
        });
<span class="nc" id="L175">    Floor3.setOnMouseEntered(</span>
<span class="nc" id="L176">        new EventHandler&lt;MouseEvent&gt;() {</span>
          public void handle(MouseEvent event) {
<span class="nc" id="L178">            AllEquipmentView.getItems().clear();</span>
<span class="nc bnc" id="L179" title="All 2 branches missed.">            for (int i = 0; i &lt; 4; i++) {</span>
<span class="nc" id="L180">              EquipmentManagementArray[0][i] = 0;</span>
<span class="nc" id="L181">              EquipmentManagementArray[1][i] = 0;</span>
            }
            try {
<span class="nc" id="L184">              MapSideView.this.getEquipmentByFloorFromDB(FloorType.ThirdFloor).stream()</span>
<span class="nc" id="L185">                  .forEach(</span>
                      (equipment) -&gt; {
<span class="nc" id="L187">                        System.out.println(&quot;Sorting&quot;);</span>
<span class="nc" id="L188">                        AllEquipmentView.getItems().add(equipment);</span>
<span class="nc bnc" id="L189" title="All 2 branches missed.">                        if (equipment.isClean()) {</span>
<span class="nc" id="L190">                          MapSideView.this</span>
<span class="nc" id="L191">                              .EquipmentManagementArray[0][equipment.getType().ordinal()]++;</span>
                        } else {
<span class="nc" id="L193">                          MapSideView.this</span>
<span class="nc" id="L194">                              .EquipmentManagementArray[1][equipment.getType().ordinal()]++;</span>
                        }
<span class="nc" id="L196">                      });</span>
<span class="nc" id="L197">            } catch (SQLException var3) {</span>
<span class="nc" id="L198">              var3.printStackTrace();</span>
<span class="nc" id="L199">            }</span>
<span class="nc" id="L200">            updateFieldsinGrid();</span>
<span class="nc" id="L201">          }</span>
        });
<span class="nc" id="L203">    Floor3.setOnMouseClicked(</span>
<span class="nc" id="L204">        new EventHandler&lt;MouseEvent&gt;() {</span>
          @Override
          public void handle(MouseEvent event) {
<span class="nc" id="L207">            Tabber.mainTabPane.getSelectionModel().select(2);</span>
            try {
<span class="nc" id="L209">              MapView.switchFloors(FloorType.ThirdFloor);</span>
<span class="nc" id="L210">            } catch (SQLException e) {</span>
<span class="nc" id="L211">              e.printStackTrace();</span>
<span class="nc" id="L212">            }</span>
<span class="nc" id="L213">          }</span>
        });
<span class="nc" id="L215">    layout.getChildren().addAll(Floor3, Floor1, LL1);</span>
<span class="nc" id="L216">    holder.setMouseTransparent(true);</span>
<span class="nc" id="L217">    holder.getStyleClass().add(&quot;combo-box&quot;);</span>
<span class="nc" id="L218">    staticWrapper.getChildren().add(holder);</span>
<span class="nc" id="L219">    Grid.setColumnSpan(AllEquipmentView, 3);</span>
<span class="nc" id="L220">    return staticWrapper;</span>
  }

  private void updateFieldsinGrid() {
<span class="nc bnc" id="L224" title="All 2 branches missed.">    for (int i = 0; i &lt; 4; i++) {</span>
<span class="nc" id="L225">      cleanFields.get(i).setText(String.valueOf(EquipmentManagementArray[1][i]));</span>
<span class="nc" id="L226">      dirtyFields.get(i).setText(String.valueOf(EquipmentManagementArray[0][i]));</span>
    }
<span class="nc" id="L228">  }</span>

  private ZoomableScrollPane createScrollPane(Pane layout) {
<span class="nc" id="L231">    ZoomableScrollPane scroll = new ZoomableScrollPane(layout);</span>
<span class="nc" id="L232">    scroll.setHbarPolicy(ScrollPane.ScrollBarPolicy.NEVER);</span>
<span class="nc" id="L233">    scroll.setVbarPolicy(ScrollPane.ScrollBarPolicy.NEVER);</span>
<span class="nc" id="L234">    scroll.setPannable(true);</span>
    // scroll.setPrefSize(WIDTH, HEIGHT);
<span class="nc" id="L236">    return scroll;</span>
  }

  private Rectangle createRectangle(
      double PixelXLeftTop, double PixelYLeftTop, double width, double height) {
<span class="nc" id="L241">    Rectangle retval = new Rectangle();</span>
<span class="nc" id="L242">    retval.setWidth(width);</span>
<span class="nc" id="L243">    retval.setHeight(height);</span>
<span class="nc" id="L244">    retval.setTranslateX(PixelXLeftTop + retval.getWidth() / 2 - MAPWIDTH / 2);</span>
<span class="nc" id="L245">    retval.setTranslateY(PixelYLeftTop + retval.getHeight() / 2 - MAPHEIGHT / 2);</span>
<span class="nc" id="L246">    retval.setFill(Color.BLUE);</span>
<span class="nc" id="L247">    retval.setOpacity(.35);</span>
<span class="nc" id="L248">    return retval;</span>
  }

  private List&lt;Equipment&gt; getEquipmentByFloorFromDB(FloorType floor) throws SQLException {
<span class="nc" id="L252">    List&lt;Equipment&gt; equipmentList = new ArrayList();</span>
    for (Equipment equipment :
<span class="nc bnc" id="L254" title="All 2 branches missed.">        ((EquipmentManager) DBManager.getManager(DataBaseObjectType.Equipment)).getAll()) {</span>
<span class="nc bnc" id="L255" title="All 2 branches missed.">      if (equipment.getLocation().getFloor() == floor) {</span>
<span class="nc" id="L256">        equipmentList.add(equipment);</span>
      }
<span class="nc" id="L258">    }</span>
<span class="nc" id="L259">    return equipmentList;</span>
  }

<span class="nc" id="L262">  private void SwitchToMapView(FloorType floor) {}</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.4.201905082037</span></div></body></html>